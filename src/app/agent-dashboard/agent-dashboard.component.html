<div class="min-h-screen bg-gray-100 p-6">
  <h2 class="text-2xl font-bold mb-6 text-gray-800">Agent Dashboard</h2>

  <div class="flex gap-6">
    <!-- Left Side: List of Pending Escalations -->
    <div class="w-1/3 bg-white rounded-lg shadow-md p-6">
      <h3 class="text-xl font-semibold mb-4 text-gray-700">Pending Escalations</h3>
      <ul class="space-y-4">
        <li
          *ngFor="let escalation of escalations"
          (click)="selectEscalation(escalation)"
          class="p-4 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer transition-colors"
        >
          <div class="text-gray-700">
            <strong class="font-medium">Escalation ID:</strong> {{ escalation.id }}
          </div>
          <div class="text-gray-700">
            <strong class="font-medium">Chatbot ID:</strong> {{ escalation.chatbot_id }}
          </div>
          <div class="text-gray-700">
            <strong class="font-medium">Created At:</strong>
            {{ escalation.created_at | date:'medium' }}
          </div>
          <div class="text-gray-700">
            <strong class="font-medium">Status:</strong>
            <span
              class="ml-2 px-2 py-1 text-sm rounded-full"
              [ngClass]="{
                'bg-yellow-100 text-yellow-800': escalation.status === 'pending',
                'bg-green-100 text-green-800': escalation.status === 'in_progress'
              }"
            >
              {{ escalation.status }}
            </span>
          </div>
          <button
            (click)="joinEscalation(escalation.id)"
            class="mt-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors"
          >
            Join
          </button>
          <button
            (click)="deleteEscalation(escalation.id)"
            class="mt-2 ml-2 px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-800 transition-colors"
          >
            Delete
          </button>
        </li>
      </ul>
    </div>

    <!-- Right Side: Selected Escalation Details -->
    <div *ngIf="selectedEscalation" class="flex-1 bg-white rounded-lg shadow-md p-6">
      <h3 class="text-xl font-semibold mb-4 text-gray-700">Conversation</h3>
      <div class="messages h-96 overflow-y-auto mb-4 space-y-4">
        <div
          *ngFor="let message of messages"
          class="p-4 rounded-lg"
          [ngClass]="{
            'bg-blue-50 ml-auto w-3/4': message.sender === 'agent',
            'bg-gray-50 mr-auto w-3/4': message.sender === 'user'
          }"
        >
          <strong class="block font-medium text-gray-700">{{ message.sender }}:</strong>
          <p class="text-gray-600">{{ message.message }}</p>
          <small class="block text-xs text-gray-500 mt-1">{{ message.timestamp | date:'short' }}</small>
        </div>
      </div>

      <!-- Message Input -->
      <div class="message-input mt-4">
        <textarea
          [(ngModel)]="newMessage"
          placeholder="Type your message..."
          class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
          rows="3"
        ></textarea>
        <button
          (click)="sendMessage()"
          class="mt-2 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"
        >
          Send
        </button>
      </div>
    </div>
  </div>
</div>